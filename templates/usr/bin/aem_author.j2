#!/bin/bash
#
# description: This service manages the Adobe Experience Manager java process.
# process name: aem_author

# Source function library.
. /etc/rc.d/init.d/functions

SCRIPT_NAME=`basename $0`
BIN={{ aem_author_docroot }}/crx-quickstart/bin
START=${BIN}/start
STOP=${BIN}/stop
STATUS="${BIN}/status"

case "$1" in
  start)
    echo -n "Starting AEM Author services: "
    ; su - {{ aem_owner }}
    ${START}
    touch /var/lock/subsys/$SCRIPT_NAME
  ;;
  stop)
    echo -n "Shutting down AEM Author services: "
    ; su - {{ aem_owner }}
    ${STOP}
    rm -f /var/lock/subsys/$SCRIPT_NAME
  ;;
  status)
    echo -n "Status for AEM Author service: "
    ; su - {{ aem_owner }}
    ${STATUS}
  ;;
  restart)
    echo -n "Restarting down AEM Author services: "
    ; su - {{ aem_owner }} ${STOP}
    ; su - {{ aem_owner }} ${START}
    ${STOP}
    ${START}
  ;;
  reload)
  ;;
  *)
    echo "Usage: $SCRIPT_NAME {start|stop|status|reload}"
    exit 1
  ;;
esac